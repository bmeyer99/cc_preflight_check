# Task Status Template (DO NOT DELETE THIS)

## Task Identification
- **Task #**: P5-T1.2
- **Task Title**: Run Integration Tests with Test CFTs and Varied IAM Principals
- **Task Assigned to**: Code Mode
- **Task Assigned from**: Architect Mode (Task 1.1.1)
- **Task Priority**: High
- **Task Status**: Assigned

## Task Details
### Requirements:
- Execute the pre-flight check script against the test CFTs created in Task P5-T1.1.
- For these tests, use IAM principals with known and intentionally varied permission sets:
    - Some principals should have sufficient permissions for the test CFT to "pass" (all required actions allowed).
    - Other principals should have intentionally insufficient permissions, designed to trigger specific "denied" scenarios that the script should detect.
- This may involve creating specific IAM users/roles in a test AWS account or using a mocking framework like `moto` if live AWS calls for `iam:SimulatePrincipalPolicy` are part of the test strategy.
- Document the expected outcomes for each test CFT / IAM principal combination.
- Compare the script's actual output against the expected outcomes to verify detection capabilities.

### Acceptance Criteria (AC):
- Integration tests are executed by running the script against all test CFTs from P5-T1.1, using a set of IAM principals with pre-defined (sufficient and insufficient) permissions.
- The script correctly identifies "allowed" scenarios when run with principals having adequate permissions for a given test CFT.
- The script correctly identifies and reports "denied" actions when run with principals having insufficient permissions for a given test CFT.
- The actual outcomes of the script match the documented expected outcomes for at least 90% of test cases.
- Discrepancies between actual and expected outcomes are documented and investigated.

## Planning & Tracking
- **Task Dependencies**: P5-T1.1 (requires the test CFTs), a strategy for managing/mocking IAM principals for testing.

## Documentation
### Task Outcome & Summary
[To be filled upon completion]

### Task Issues & Blockers
- [To be filled if any arise]

### Associated Files
- [`project_plan.md`](project_plan.md)
- [`tasks/task_template.md`](tasks/task_template.md)
- Test CFTs from P5-T1.1.
- Documentation of test IAM principals and their permissions.
- Test execution logs and comparison of actual vs. expected results.